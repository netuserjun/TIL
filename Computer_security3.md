## 0429 네트워크보안
보강은 5월 13일 수업끝나고 5시 ~ 8시 
시험이 6월 19 20
<br>
### 네트워크이해
전송계층의 3way handshaking, 세션종료 과정. <br>
whois 서버 : 전세계의 도메인이름, 네트워크주소, ip주소... 등등 정해주는... <br>
DNS (domain name server)는 계층구조를 가짐. <br>
dns의 서버이름 해석 과정.. <br>

#### dos  서비스 거부 공격
공격대상이 수용할 수 있는 능력을 넘어서는 정보를 제공해서 동작못하도록 하는 공격 <br>
자원 고갈 공격형, 취약점 공격형으로 분류됨 <br>
자원고갈 : ping of death 공격. 초기 도스공격. 공격대상은 대략의 작은 패킷을 수신해서 네트워크 마비. 점검 ping 패킷을 최대한 길게 65500바이트로 보내면 수백, 수천개의 패킷으로 나위어져 대상에게 과부하 발생. <br>
syn 플러딩 공격 : 자원고갈 일종. 네트워크에서 서비스를 제공하는 시스템에 있는 이용자 수 제한을 이용한 공격. 존재하지 않는 클라이언트가 한정된 접속 공간에 접속한 것처럼 속여서 다른 사람들이 서비스를 못받게 함. 3way 핸드쉐이킹의 문제점을 이용한 공격. 클라가 서버에 다시 ack을 보내지 않는경우. 서버는 ack가 올때까지 세션을 만들지못하고 기다려야한다.  공격자는 정상이용자 행세를 해서 서버로 수많은 syn 패킷을 보낸다. 서버의 가용 접속자 수를 모두 syn received 상태로 만든다. 방어기법은 syn received 대기 시간을 줄이기.<br>
스머프공격 : 자원고갈 일종. ICMP 패킷을 사용. 다이렉트 브로트캐스트를 악용해서 공격. <br>
<br>
취약점 공격형 : boint, bomb, tear drop 공격.  TCP 패킷에는 시퀀스 넘버가 기록되어있는데 이 순서를 바꿔버리는 것(bomb) <br>
land 공격 : 방화벽 설치로 방어. 

### 분산서비스거부공격 DDOS
악성코드와 봇넷 <br> 
봇넷의 에이전트들이 공격을 수행. <br>
대응 

### 스니핑
스니핑 공격 : 냄새를 맡는 걸 비유한것. 데이터 속에서 어떤 정보를 찾는것. 수동적 공격이라 함.<br>
랜카드의 프러미스큐어스 모드를 사용해서 링크 계층과 네트워크계층의 정보를 이용한 필터링을 해제함. <br> 
정상적인 네트워크 필터링을 해제하여 원래는 차단될 패킷들까지 받아보는것. <br>
<br>
스니핑 종류 :  <br>
1. 스위치 재밍 공격 :스위치가 mac 주소 테이블을 기반으로 포트에 패킷을 스위칭할 떄 정상적인 스위치 기능을 마비시키는 공격. MACOF 공격이라고도 함. <br>
2. SPAN 포트 태핑 공격 : 스위치의 포트미러링(각 포트에 전송되는 데이터를 미러링하는 포트에도 똑같이 보내는 것) 기능을 사용. <br>
탐지방법 : ping, ARP, DNS, 유인, ARP Watch 등을 이용한 탐지. <br>

<br>
### 스푸핑
속이기, 외부의 악의적 공격자가 방문을 유도해서 시스템권한을 획득, 정보 추출 공격. <br>
ARP 스푸핑 : MAC 주소를 속이는 것. 서버로 가는 패킷을 공격자에게 오도록 통신흐름을 왜곡. <br>
IP 스푸핑 : 신뢰관계인 서버와 클라를 찾아서 클라이언트에 DOS 공격을 해서 연결을 끊고, 클라의 IP주소를 획득한 공격자는 실제 클라이언트처럼 서버에 접속 <br>
신뢰관계 : 도메인 사이에 설정되는 관계로, 이 트러스트 관계라면 패스워드 없이 접근이 가능해짐. 단방향과 양방향이 있음.<br>
DNS 스푸핑 : 실제 DNS 서버보다 빨리 DNS reponse 패킷을 보내 공격 대상이 잘못된 IP주소로 접속하게 유도하는 방법. 모든 서버의 DNS 스푸핑을 막기는 어렵다. 그림 설명 자세히 함.<br>
<br>
세션 하이재킹 : 세션 가로채기, 두 시스템간의 연결이 활성화된 상태(로그인된 상태)를 가로채는 것. 작업중 자리비운사이에 몰래 하는것도 이 공격<br>
TCP 세션 하이재킹 : TCP의 취약점을 이용해서 정상접속을 빼앗기. 서버와 클라에 각각 잘못된 시퀀스 넘버를 보내서 혼란을 일으키고 끼어들기 <br>
대응책 : 세션 인증이 높은 프로토콜 SSH 사용. 클라와 서버 사이에 MAC 주소 고정. <br>
<br>
무선랜 : 확장된 무선 네트워크의 보안이 설정되어있지 않으면 공격자가 내부 사용자와 같은 권한으로 공격 가능. <br>
WEP(wired Equivalent privacy) : 무선랜의 암호화에 사용하는거. 시도응답 사용. 현재는 사용중단됨.<br>
WPA-PSK : WEP 보안 문제를 해결해서 나온 방식.
무선 네트워크 공격 : 무선 랜 인증 우회. 유선네트워크의 공격 대부분이 무선에서도 적용됨 <br>

시험문제 : 라우터, 스위치, 허브 각각의 역할, 기능, 차이점, 어떤 계층에서 쓰는지를 조사. <br> 

### 방화벽

방화벽 침입탐지 침입방지 3가지를 혼용 <br>
방화벽은 특정 트래픽의 허용과 차단을 결정하는 네트워크 보안 디바이스  <br>
방화벽의 가장 큰 기능은 접근제어. 외부 내부 룰셋을 정해서 허용과 거부 결정.  <br>
로깅과 감사 추적. 인증기능도 가짐.   <br>
방화벽의 한계는 바이러스에 감염된 파일을 거르지 못함.  <br>

### 침입탐지시스템 IDS
네트워크를 통한 공격을 탐지하는 장비.  방화벽은 접근제어고 이건 말그대로 침입탐지. <br>
악성코드같은 방화벼이 못잡는걸 얘가 처리  <br>
호스트기반 IDS : 개인 PC 기반으로 OS에 부가적으로 설치. 비싸고 네트워크 환경과 연계성이 낮음.  <br>
네트워크기반 IDS : 호스트 여러 개로 구성된 네트워크 기반. 감시 영역이 크고 IP주소가 없어서 공격에 영향안받음. 암호화된 내용 검사불가. <br>
 <br>
주요기능은 필터링과 축약. 자세한 데이터보다 빠르고 정확하게 파악할 수 있는 데이터가 더 유용하기 때문.  <br>
#### 오용탐지와 이상탐지
오용탐지 : 디비에서 이미 발견된 것들을 저장해두고, 같은 공격이 들어오면 비교. 오탐률이 낮고 효율적. 알려진 공격만 탐지. 공격의 순서는 모름. 상태전이라는 건 오용탐지 기법의 일종.  <br>
이상탐지 : 정상적인 상태를 기준으로 급격한 변화나 낮은 확률의 일이 발생하면 알려주는 기능. 인공지능 활용. 오탐률이 높음. 면역 시스템 활용해서 ㅅ스스로 학습. <br>

IDS를 설치하는 위치.  <br>
라우터 이전. : 네트워크에 실행되는 모든 공격 탐지 가능. 패킷을 너무 많이 수집하므로 비효율적.  <br>
라우터 뒤 : 더 강력한 의지를 가진 공격 탐지 가능. <br>
방화벽 뒤 : 네트워크에 직접 영향을 주는 공격에 대한 방어. 내부 공격자도 탐지 가능. 가장 좋은 위치.  <br>
내부 네트워크 : 신뢰할 수 없는 내부 이용자들 감시 목적. 세번째로 좋은곳 <br>
DMZ : 두번째로 좋은 곳. 내부와 외부의 경계선 같은 곳.  <br>

### IPS :  침입 방지 시스템. 
방화벽의 단점을 보완하고 IDS의 기능에 능동적 대응방향을 추가한 시스템.  방화벽과 IDS의 조합.<br>
모든 패킷을 하나하나 검사해서 유해한 패킷(공격검사)과 결함이 있는 패킷(무결성검사)들을 모두 걸러냄.  <br>
동작원리는 IPS에 가상머신을 이용해서, 공격같으면 가상머신에서 실행해서 결과를 지켜봄. 유해한 동작이 보이면 바로 차단.  <br>
방화벽 다음 내부네트워크 이전에 설치하는게 최고.  <br>

### UTM 통합 위협 관리 시스템.
방화벽 기반인데 기능이 아주 많은 방화벽.  <br>
위협 환경이 변화해서 HW 성능 업데이트. 차세대 방화벽 NGFW 으로 발전.  <br>'


## 7장 디지털 포렌식
사이버범죄가 발생했을 때 증거를 추출해서 증거가 법정에서 인정받을 수 있게 하는 일련의 과정 <br>
컴퓨터 보안은 넓은 의미로 정보보호. 디지털 포렌식은 컴퓨터 보안의 응용.. <br>
최근에 클라우드 포렌식과 IoT 포렌식이 추가됨. <br>

### 디지털 포렌식 조사의 일반 원칙 <br>
정당성(입수증거의 적법성, 독수의 과실), 재현(같은 조건에서 같은 결과), 신속성(전 과정은 신속해야함), 연계보관성(증거의 획득-이송-분석-보관-법정제출 각 단계의 담당자와 책임자를 명확히), 무결성(수집증거가 위변조 되지 않았음을 증명), 절차 연속성 <br>

디지털 포렌식 수행과정 자세히 설명. <br>

### 디지털 증거
Surveliance : smart CCTV <br>
Emerging, convergence, 융합 ... <br>
<br>
자동으로 생성되는 증거(방화벽 로그, 인터넷사용기록) vs 인위적으로 생성되는 증거(문서, 메일...) <br>
휘발성 증거(프로세스, 예약작업, 네트워크 공유 정보) vs 비휘발성 증거(운영체제, 파일...) <br>
<br>
디지털 증거의 특징 <br>
매체독립성 : 아날로그와 다르게 디지털은 사본과 원본이 구별 불가 <br>
비가시성, 비가독성 : 디지털 정보는 그 자체로는 뭔지 모른다. 의미없는 숫자들..<br>
취약성 : 언제나 쉽게 삭제 변조가능. <br>
대량성 : 데이터의 양이 방대하다. <br>
전문성 : 수집과 분석에 전문가가 있어야 신뢰가능. <br>
네트워크 관련성 : 인터넷은 모두 연결되어있으니 국경에 따라 관할을 어디까지 인정하느냐 문제. <br>

디지털 증거 : 내용물 + 특성정보(메타데이터, 타임스탬프) <br>

위법수집증거능력배제원칙 : 적법한 절차에 따르지 않고 수집한 증거는 증거로 할 수 없다. <br>
자유 심증주의 : 증거의 증명력을 평가할 때 아무런 제한, 구속력을 두지 않고 법관의 자유로운 판단에 맡김. <br>
전문 : 전해들은 말. 사실의 진위여부를 모른 채 전해들은 말. 법정 밖에서 진술된 것. <br>
전문(증거배제)법칙 : 전문증거의 증거능력을 배제하는 증거법상의 원칙. <br>
전문법칙 예외 기준 : 신용성의 정황적인 보장, 필요성의 원리 <br>
컴퓨터에 의해 자동으로 생성된 증거는 전문이 아니다. <br>
진정성  : 증거 수집 저장과정에서 오류 없었고, 의도된 결과가 정확하고, 그로인해 생성된 자료. <br>
무결성 : 증거가 원본 소스로부터 수집되어 보관, 분석되는 과정에서 부당한 수정, 변경, 손상이 없도록 유지.해야 한다. <br>
원본성 : <br>

증거 수집 전달 단계에서 제3자의 공증. <br>


### 9장
조사 모델 수행시 유의사항 :  <br>
디지털 포렌식 조사 모델 : 흐름... 각 단계별로 설명함.<br>
1. 조사준비 : 현장에 나가기 전에 준비. <br>
    조사권한획득 : 영장 청구 <br>
    조사 팀 구성 : 공증인 구하기, 전문가 투입 <br>
    장비/도구 준비 : 증거 보호 케이스, 포렌식 소프트웨어 등등 장비 준비 <br>
2. 현장 대응 : 현장 통제, 보존, 조사대상 매체 확보. <br>
      현장 통제, 보존 : 영장제시, 현장통제 분석, <br>
      권한획득과 협조 : 주요 대상에 접근허가 <br>
      조사 대상 매체 확보 : 레이드(RAid) 시스템(컴퓨터 여러 대로 구성된 시스템)은 컴퓨터 한대로 끝내지 말고 다 뒤지기 <br>
3. 증거 확보 및 수집 : 시스템을 통째로 가져오는게 젤 좋음. 저장매체확보, 증거물 포장 봉인. <br>
     증거수집방법 결정 : 시스템 확보 , 원본하드 확보, 사본하드 확보, 선별 데이터 수집<br>
     시스템 확보 : 전원 차단시 강제 차단하면 손상입을수도 잇으니 주의<br>
     하드디스크 확보 : BIOS 시간정보확인방법<br>
     사본 디스크 확보 : 디스크 이미징 장비, 디스크 이미징 소프트웨어로 사본 디스크 만들기.<br>
     디스크 이미지 뜰때 주의점 : 무결성 유지해야함. <br>
4. 운반 및 확인 : 증거물 운반, 원본 보관, 등록 <br>
     운반, 인수인계 시 : 공증인 입회하에 확인..<br>
5. 조사 및 분석 : 사본 생성, 데이터 추출 분류 <br>
     데이터추출 : 물리적 vs 논리적 <br>
     물리적추출 : 물리적인 매체에서 데이터를 복구하고 식별해서 추출 <br>
     논리적추출 : 파일과 데이터를 복구하고 식별해서 데이터 추출 <br>
     데이터 분류방법 : 타임프레임, 위변조, 프로그램별, 소유자별 분류기준. <br>
     시간역전현상(수정시간이 만든시간보다 먼저나옴)이 있으면 분석1순위 <br>
     파일 종류별 통계 분석으로 시스템의 주요 사용목적을 추측하고 그거 위주로 분석 <br>
     타임프레임을 보고 사건발생일에 했던것 위주로 분석 <br>
     상세분석 : 인터넷(사용기록, 쿠키, 임시인터넷파일), 레지스트리, 파일 분석 <br>
     인터넷 사용흔적 : 사용자의 관심사, 취미, 생활패턴까지 분석 가능. 범죄행위의 직,간접적 증거자료 획득 가능. <br>
     위변조 데이터 분석 : 파일 확장자 불일치, 패스워드로 접근제어되거나 암호화된 파일 <br>
6. 보고 및 증언 : <br>

## 10장.
활성 시스템 : live 시스템 <br>
활성 데이터 : 활성 시스템에서 수집할 수 있는 휘발성 데이터와 비휘발성 데이터 둘을 포괄하는 개념. <br>
비휘발성 데이터 수집의 필요성 : <br>
12쪽 왼쪽일수록 휘발성이 강한 순  시험문제로 잇엇다고함..cCD<br>
CD, USB로 수집.. <br>
휘발성 데이터 수집목적 : 프로세스정보, 네트워크정보, 사용자정보 <br>
분석방법 : 상관관계(서로 관계된 정보들을 추출해서 상관분석. 비정상적 행위 분석) <br>

### 임베디드 증거확보
스마트폰 주요 데이터 : 이메일, 메신저, GPS정보, 인터넷사용기록, 휴대폰데이터 <br>
시그니쳐 : 디지털시그니쳐(전자서명), IDS(침입탐지시스템)에서 공격의 시그니쳐(특징)를 확인하고 판별, 파일의 특징(확장자별로 갖고잇는 구조의 특징) <br>
데이터 뷰잉 기술 : 시각화. 데이터를 가시적으로 확인할 수 있게 디지털 데이터의 구조를 시각적으로 출력하는 기술. 헥스 에디터.<br>
검색 기술 : 포렌식은 검색의 반복. 검색 범위 축소가 가장 중요. 키워드검색, 해쉬검색(파일의 해쉬 셋을 사용해서 검색 수준 선정, 자료에 태그 다는 방법), 슬랙 검색(파일 시스템의 잉여 공간에 남은 기존 파일의 조각 정보를 찾아내기) <br>

로그분석 : 이벤트 로그 분석 <br>

### 안티포렌식 대응
